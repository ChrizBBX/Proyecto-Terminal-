@model Terminal.WebUI.Models.BoletosViewModel

@{
    ViewData["Title"] = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="card">
    <div class="card-header">
        <h1>Boleto</h1>
    </div>
    <div class="card-body">
        <div class="row">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <div class="form-group col-6">
                <label asp-for="term_ID" class="control-label"></label>
                <select asp-for="term_ID" class="form-control" asp-items="ViewBag.term_Id"><option value="">--Seleccione una opcion--</option></select>
                <span asp-validation-for="term_ID" class="text-danger"></span>
            </div>

            <div class="form-group col-6">
                <label asp-for="comp_ID" class="control-label"></label>
       <select asp-for="comp_ID" class="form-control" asp-items="ViewBag.comp_ID"><option value="">--Seleccioene una opcion--</option></select>
                <span asp-validation-for="comp_ID" class="text-danger"></span>
            </div>

            <div class="form-group col-6 mt-3">
                <label asp-for="empl_ID" class="control-label"></label>
                <select asp-for="empl_ID" class="form-control" asp-items="ViewBag.empl_ID"><option value="">--Seleccione una opcion--</option></select>
                <span asp-validation-for="empl_ID" class="text-danger"></span>
            </div>

            <div class="form-group col-6 mt-3">
                <label asp-for="clie_ID" class="control-label"></label>
               <select asp-for="clie_ID" class="form-control" asp-items="ViewBag.clie_ID"><option value="">--Seleccione una opcion--</option></select>
                <span asp-validation-for="clie_ID" class="text-danger"></span>
            </div>

            <div class="form-group col-6 mt-3">
                <label asp-for="hora_ID" class="control-label"></label>
                <select asp-for="hora_ID" class="form-control" asp-items="ViewBag.hora_ID"><option value="">--Seleccione una opcion--</option></select>
                <span asp-validation-for="hora_ID" class="text-danger"></span>
            </div>

            <div class="form-group col-6 mt-3">
                <label asp-for="pago_ID" class="control-label"></label>
                <select asp-for="pago_ID" class="form-control">
                    <option value="">--Seleccione una opcion--</option>
                    <option value="1">Efectivo</option>
                    <option value="2">Debito</option>
                    <option value="3">Credito</option>
                </select>
                <span asp-validation-for="pago_ID" class="text-danger"></span>
            </div>

            <div class="form-group col-6 mt-3">
                <label asp-for="bole_Precio" class="control-label"></label>
                <select asp-for="bole_Precio" class="form-control" disabled></select>
                <span asp-validation-for="bole_Precio" class="text-danger"></span>
            </div>

            <div class="form-group">
                <input type="submit" value="Create" class="btn btn-primary" />
            </div>

            <div>
                <a asp-action="Index">Back to List</a>
            </div>


        </div>
    </div>
</div>


<script>
    $(document).ready(function () {
        $("#dept_ID").change(function () {
            console.log("si cambio");
            var departamentoId = $("#dept_ID").val();
            $.getJSON('/Terminal/CargarMunicipios', { id: departamentoId })

                .done(function (municipios) {

                    $("#muni_ID").prop("disabled", false);
                    var municipiosSelect = $('#muni_ID');
                    municipiosSelect.empty();

                    municipiosSelect.append($('<option>', {
                        value: '',
                        text: '--Selecciona un municipio--'
                    }));

                    $.each(municipios, function (index, item) {
                        municipiosSelect.append($('<option>', {
                            value: item.muni_ID,
                            text: item.muni_Descripcion
                        }));
                        console.log(item.muni_ID)
                    });

                })

                .fail(function (jqXHR, textStatus, errorThrown) {
                    console.error('Error al cargar los municipios: ' + textStatus + ', ' + errorThrown);
                });

        });
    });
</script>